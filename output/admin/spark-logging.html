<!DOCTYPE html>
<html lang="en">
<head>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="../../css/prism.css"/><title></title>
</head>
<body>
<h1 >Spark Logging for InsightEdge</h1>
<hr>


<p>Spark uses log4j to make logging calls.
For information about the log4j logging framework, refer to the <a href="http://logging.apache.org/log4j/1.2/index.html" target="_blank" >log4j Overview <i class='fa fa-external-link'></i></a> online documentation.</p>

<h1 id="configuration">Configuration</h1>

<p>Log4j configures the logging during initialization, using a logging configuration file that is read at startup. This logging configuration file is in the standard <code>java.util.Properties</code> format.</p>

<h2 id="insightedge-log4j-default-configuration">InsightEdge log4j Default Configuration</h2>

<p>The default Spark logger configuration file is located under the following directory:</p>

<pre><code class="language-bash">&lt;XAP_HOME&gt;/insightedge/conf/spark_log4j.properties
</code></pre>

<h2 id="configuration-file-properties">Configuration File Properties</h2>

<h3 id="console-appender">Console Appender</h3>

<p>The Console Appender writes log messages to the console.</p>

<h3 id="rollingfileappender">RollingFileAppender</h3>

<p>The RollingFileAppender writes log messages to log files. The Spark log files are:</p>

<ul>
<li>Written to <XAP_HOME>/logs.</li>
<li>Rolled based on file size (up to 2GB)</li>
</ul>

<h4 id="log-file-name-format">Log File Name Format</h4>

<p>The format of the log file name is:</p>

<pre><code class="language-bash">{yyyy-MM-dd~HH.mm}-gigaspaces-{role}.log
</code></pre>

<p>The role is either spark-master or spark-worker. For example:</p>

<pre><code class="language-bash">2017-09-17~17.44-gigaspaces-spark-master.log
</code></pre>

<h3 id="spark-log-message-format">Spark Log Message Format</h3>

<p>In log4j, the log message format is configured in the <code>*.layout.ConversionPattern</code> property. In InsightEdge, the Spark log message format is configured to match the XAP format. Therefore, the ConversionPattern is:</p>

<pre><code class="language-bash">    log4j.appender.console.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss,SSS} %p [%c] - %m%n
log4j.appender.file.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss,SSS} %p [%c] - %m%n
</code></pre>

<h1 id="overriding-the-default-configuration">Overriding the Default Configuration</h1>

<p>Spark_log4j.properties can either be modified to suit the requirements of your environment, or deleted if you prefer to use the Spark default log4j configuration.</p>

</body>
<script src="../../js/prism.js"></script>
</html>